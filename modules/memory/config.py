"""
记忆系统配置参数
"""
import re

# ==================== 核心配置 ====================
SHORT_TERM_CAPACITY = 7
SIMILARITY_THRESHOLD = 0.8  # 检索阈值
STRONG_SIMILARITY_THRESHOLD = 0.35  # 实体级冲突阈值
SENTENCE_CONFLICT_THRESHOLD = 0.4  # 整句冲突阈值
FORGETTING_RATE = 0.05  # 遗忘速率
CONSOLIDATION_THRESHOLD = 3

# 静默模式（减少后台输出）
SILENT_MODE = True

# ==================== 冲突检测配置 ====================
# 冲突指示词（表示信息更新/更正）
UPDATE_INDICATORS = {
    '其实', '不是', '不对', '错了', '应该是', '实际上', 
    '改成', '变成', '现在是', '不再是', '已经', '改了', 
    '换成', '更正', '纠正', '以前', '之前', '现在',
    '不喜欢', '讨厌', '不爱', '不想', '不要', 
    '不吃', '不玩', '不看', '不听', '不用', '不再'
}

# 偏好词模式
PREFERENCE_PATTERNS = {
    'positive': ['喜欢', '爱', '爱吃', '喜欢吃', '喜欢玩', '喜欢看', '喜欢听', '最爱', '偏爱'],
    'negative': ['不喜欢', '讨厌', '不爱', '不爱吃', '不喜欢吃', '不喜欢玩', '不喜欢看', '不喜欢听', '不想', '不要']
}

# 偏好词对（正向 vs 否定）
PREFERENCE_PAIRS = [
    ('喜欢', '不喜欢'),
    ('爱', '不爱'),
    ('爱吃', '不爱吃'),
    ('喜欢吃', '不喜欢吃'),
    ('喜欢玩', '不喜欢玩'),
    ('喜欢看', '不喜欢看'),
    ('喜欢听', '不喜欢听'),
    ('想', '不想'),
    ('要', '不要'),
    ('最爱', '不喜欢'),
    ('偏爱', '讨厌'),
]

# 偏好更新模式（表示偏好变化，如"我现在喜欢X"应覆盖"喜欢Y"）
PREFERENCE_UPDATE_PATTERNS = [
    '现在喜欢', '现在爱', '现在爱吃', '现在喜欢吃', '现在喜欢玩', 
    '现在喜欢看', '现在喜欢听', '现在最爱', '最近喜欢', '最近爱吃',
    '改喜欢', '变得喜欢', '开始喜欢'
]

# 偏好类别（用于同类偏好更新检测）
PREFERENCE_CATEGORIES = {
    'food': ['吃', '食物', '美食', '水果', '蔬菜', '肉', '零食', '甜点', '饮料'],
    'music': ['听', '音乐', '歌', '曲', '乐'],
    'movie': ['看', '电影', '影片', '剧'],
    'game': ['玩', '游戏'],
    'sport': ['运动', '球', '跑步', '健身'],
    'color': ['颜色', '色'],
}

# ==================== 情感分析配置 ====================
EMOTION_KEYWORDS = {
    'positive': {'喜欢', '爱', '开心', '高兴', '快乐', '感谢', '棒', '好', '赞', '优秀', '美', '幸福', '温暖', '期待', '惊喜'},
    'negative': {'讨厌', '烦', '难过', '伤心', '生气', '愤怒', '失望', '害怕', '焦虑', '担心', '痛苦', '糟糕', '差', '恨'},
    'important': {'记住', '重要', '关键', '必须', '一定', '永远', '千万', '务必', '不要忘', '提醒'}
}

# 合并所有情感词用于快速检测
ALL_EMOTION_WORDS = EMOTION_KEYWORDS['positive'] | EMOTION_KEYWORDS['negative'] | EMOTION_KEYWORDS['important']

# ==================== 实体提取配置 ====================
ENTITY_WEIGHTS = {
    'nr': 1.5,  # 人名
    'ns': 1.3,  # 地名
    'nt': 1.2,  # 机构名
    'nz': 1.1,  # 其他专有名词
    'n': 1.0,   # 普通名词
    't': 1.2,   # 时间词
}
ENTITY_FLAGS = set(ENTITY_WEIGHTS.keys())

# ==================== 文本处理配置 ====================
PUNCTUATION = ['。', '！', '？', '!', '?', '\n', '；', ';', '：', ':', '，', ',']
CLEAN_PATTERN = re.compile(r'[^\u4e00-\u9fa5a-zA-Z0-9\s。！？!?\n；;：:，,]')
SPACE_PATTERN = re.compile(r'\s+')
